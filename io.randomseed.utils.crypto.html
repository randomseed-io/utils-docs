<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>io.randomseed.utils.crypto documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script><link rel="stylesheet" type="text/css" href="css/randomseed.css" /></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Random:utils</span> <span class="project-version">1.2.39</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="10_introduction.html"><div class="inner"><span>Introduction</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>io</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>randomseed</span></div></div></li><li class="depth-3"><a href="io.randomseed.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li><li class="depth-4 branch"><a href="io.randomseed.utils.bot.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bot</span></div></a></li><li class="depth-4 branch"><a href="io.randomseed.utils.bus.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bus</span></div></a></li><li class="depth-4 branch current"><a href="io.randomseed.utils.crypto.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>crypto</span></div></a></li><li class="depth-4"><a href="io.randomseed.utils.db.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>db</span></div></a></li><li class="depth-5"><a href="io.randomseed.utils.db.types.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>types</span></div></a></li><li class="depth-4 branch"><a href="io.randomseed.utils.fs.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>fs</span></div></a></li><li class="depth-4 branch"><a href="io.randomseed.utils.ip.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ip</span></div></a></li><li class="depth-4"><a href="io.randomseed.utils.log.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>log</span></div></a></li><li class="depth-5"><a href="io.randomseed.utils.log.logback.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>logback</span></div></a></li><li class="depth-4 branch"><a href="io.randomseed.utils.map.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>map</span></div></a></li><li class="depth-4 branch"><a href="io.randomseed.utils.nop-cache.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>nop-cache</span></div></a></li><li class="depth-4"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>reitit</span></div></div></li><li class="depth-5"><a href="io.randomseed.utils.reitit.http.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>http</span></div></a></li><li class="depth-4 branch"><a href="io.randomseed.utils.set.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>set</span></div></a></li><li class="depth-4 branch"><a href="io.randomseed.utils.time.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>time</span></div></a></li><li class="depth-4"><a href="io.randomseed.utils.validators.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>validators</span></div></a></li><li class="depth-5"><a href="io.randomseed.utils.validators.common.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>common</span></div></a></li><li class="depth-4 branch"><a href="io.randomseed.utils.var.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>var</span></div></a></li><li class="depth-4"><a href="io.randomseed.utils.vec.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>vec</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="io.randomseed.utils.crypto.html#var-ask-key"><div class="inner"><span>ask-key</span></div></a></li><li class="depth-1"><a href="io.randomseed.utils.crypto.html#var-ask-pass"><div class="inner"><span>ask-pass</span></div></a></li><li class="depth-1"><a href="io.randomseed.utils.crypto.html#var-decrypt-key"><div class="inner"><span>decrypt-key</span></div></a></li><li class="depth-1"><a href="io.randomseed.utils.crypto.html#var-decrypt-key-bin"><div class="inner"><span>decrypt-key-bin</span></div></a></li><li class="depth-1"><a href="io.randomseed.utils.crypto.html#var-decrypt-key-core"><div class="inner"><span>decrypt-key-core</span></div></a></li><li class="depth-1"><a href="io.randomseed.utils.crypto.html#var-encrypt-key"><div class="inner"><span>encrypt-key</span></div></a></li><li class="depth-1"><a href="io.randomseed.utils.crypto.html#var-key-b64-.3Ebin"><div class="inner"><span>key-b64-&gt;bin</span></div></a></li><li class="depth-1"><a href="io.randomseed.utils.crypto.html#var-key-bin-.3Eb64"><div class="inner"><span>key-bin-&gt;b64</span></div></a></li><li class="depth-1"><a href="io.randomseed.utils.crypto.html#var-key-text-.3Ebin"><div class="inner"><span>key-text-&gt;bin</span></div></a></li><li class="depth-1"><a href="io.randomseed.utils.crypto.html#var-pwd-.3Ebin"><div class="inner"><span>pwd-&gt;bin</span></div></a></li><li class="depth-1"><a href="io.randomseed.utils.crypto.html#var-read-key"><div class="inner"><span>read-key</span></div></a></li><li class="depth-1"><a href="io.randomseed.utils.crypto.html#var-read-pwd"><div class="inner"><span>read-pwd</span></div></a></li><li class="depth-1"><a href="io.randomseed.utils.crypto.html#var-salt-b64-.3Ebin"><div class="inner"><span>salt-b64-&gt;bin</span></div></a></li><li class="depth-1"><a href="io.randomseed.utils.crypto.html#var-salt-bin-.3Eb64"><div class="inner"><span>salt-bin-&gt;b64</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">io.randomseed.utils.crypto</h1><h4 class="added">added in 1.0.0</h4><div class="doc"><div class="markdown"><p>Random utilities, crypto support functions.</p>
</div></div><div class="public anchor" id="var-ask-key"><h3>ask-key</h3><div class="usage"><code>(ask-key &amp; opts)</code></div><div class="doc"><div class="markdown"><p>Wrapper around <code>utils/ask</code> which reads a private key (as a string) and returns it. Options may be passed as a single map OR as keyword args: <code>prompt</code> (message displayed when asking for first key), <code>confirm-prompt</code> (message displayed when asking for the same key again), <code>not-match-msg</code> (message displayed when keys do not match), <code>empty-msg</code> (message displayed when the entered key is empty), <code>retries</code> (number of retries before quitting the loop; when set to <code>nil</code> or not given, it will continue indefinitely), <code>confirmation?</code> (requires key to be re-entered for confirmation, defaults to <code>true</code>), <code>allow-empty?</code> (allows the entered key to be an empty string; defaults to <code>false</code>), <code>empty-nil?</code> (returns <code>nil</code> instead of an empty string when on empty key; defaults to <code>false</code>), <code>empty-quits?</code> (short-circuits on any empty key and returns <code>nil</code>; defaults to <code>false</code>), <code>empty-quits-nil?</code> (returns <code>nil</code> when quitting on empty key; defaults to <code>true</code>). Returns the entered key or <code>nil</code>.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/utils/tree/1.2.39/src/io/randomseed/utils/crypto.clj#L151">view source</a></div></div><div class="public anchor" id="var-ask-pass"><h3>ask-pass</h3><div class="usage"><code>(ask-pass &amp; opts)</code></div><div class="doc"><div class="markdown"><p>Wrapper around <code>utils/ask</code> which reads a password and returns it. Options may be passed as a single map OR as keyword args: <code>prompt</code> (message displayed when asking for first password), <code>confirm-prompt</code> (message displayed when asking for the same password again), <code>not-match-msg</code> (message displayed when passwords do not match), <code>empty-msg</code> (message displayed when the entered password is empty), <code>retries</code> (number of retries before quitting the loop; when set to <code>nil</code> or not given, it will continue indefinitely), <code>confirmation?</code> (requires password to be re-entered for confirmation, defaults to <code>true</code>), <code>allow-empty?</code> (allows the entered password to be an empty string; defaults to <code>false</code>), <code>empty-nil?</code> (returns <code>nil</code> instead of an empty string when on empty password; defaults to <code>false</code>), <code>empty-quits?</code> (short-circuits on any empty password and returns <code>nil</code>; defaults to <code>false</code>), <code>empty-quits-nil?</code> (returns <code>nil</code> when quitting on empty password; defaults to <code>true</code>). Returns the entered password or <code>nil</code>.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/utils/tree/1.2.39/src/io/randomseed/utils/crypto.clj#L118">view source</a></div></div><div class="public anchor" id="var-decrypt-key"><h3>decrypt-key</h3><div class="usage"><code>(decrypt-key m password)</code><code>(decrypt-key encrypted salt password)</code></div><div class="doc"><div class="markdown"><p>Takes a map <code>m</code> consisting of <code>:key</code> (encrypted key expressed as a Base64-encoded string) and <code>:salt</code> (expressed as a Base64-encoded string), and a password (expressed as a string), and decrypts the given key. The key and salt can be given as separate first arguments (<code>encrypted</code> and <code>salt</code>) instead of a map. Returns decrypted, string representation of a key.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/utils/tree/1.2.39/src/io/randomseed/utils/crypto.clj#L87">view source</a></div></div><div class="public anchor" id="var-decrypt-key-bin"><h3>decrypt-key-bin</h3><div class="usage"><code>(decrypt-key-bin [iv-bin encrypted-bin] pwd-bin)</code></div><div class="doc"><div class="markdown"><p>Decrypts a given binary key. Takes a 2-element vector containing an IV and an encrypted key (both in a binary form). Takes a password <code>pwd-bin</code> as a second argument and uses it to decrypt the given key. Calls <code>decrypt-key-core</code> internally. Returns a string.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/utils/tree/1.2.39/src/io/randomseed/utils/crypto.clj#L79">view source</a></div></div><div class="public anchor" id="var-decrypt-key-core"><h3>decrypt-key-core</h3><div class="usage"><code>(decrypt-key-core encrypted k iv)</code><code>(decrypt-key-core encrypted k iv algo)</code></div><div class="doc"><div class="markdown"><p>Decrypts a binary cryptogram <code>encrypted</code> using a key <code>k</code> and random IV (<code>iv</code>). Returns a decrypted message as a string. Assumes the following algorithmic cipher-suite: <code>:aes128-cbc-hmac-sha256</code>. Optional <code>algo</code> argument allows for custom suite (will be converted to a keyword if it’s not). In default suite the key needs to have 32 bytes length and the iv 16 bytes length.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/utils/tree/1.2.39/src/io/randomseed/utils/crypto.clj#L63">view source</a></div></div><div class="public anchor" id="var-encrypt-key"><h3>encrypt-key</h3><div class="usage"><code>(encrypt-key k password)</code></div><div class="doc"><div class="markdown"><p>Encrypts a private key <code>k</code> using random IV and the given password <code>password</code>. Returns a map of Base64-encoded, url-safe strings: {:salt …, :key …}.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/utils/tree/1.2.39/src/io/randomseed/utils/crypto.clj#L51">view source</a></div></div><div class="public anchor" id="var-key-b64-.3Ebin"><h3>key-b64-&gt;bin</h3><div class="usage"><code>(key-b64-&gt;bin v)</code></div><div class="doc"><div class="markdown"><p>Decodes Base64-encoded, url-safe key string to bytes. Returns nil on nil input.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/utils/tree/1.2.39/src/io/randomseed/utils/crypto.clj#L29">view source</a></div></div><div class="public anchor" id="var-key-bin-.3Eb64"><h3>key-bin-&gt;b64</h3><div class="usage"><code>(key-bin-&gt;b64 v)</code></div><div class="doc"><div class="markdown"><p>Encodes binary key data to Base64-encoded, url-safe string.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/utils/tree/1.2.39/src/io/randomseed/utils/crypto.clj#L35">view source</a></div></div><div class="public anchor" id="var-key-text-.3Ebin"><h3>key-text-&gt;bin</h3><div class="usage"><code>(key-text-&gt;bin v)</code></div><div class="doc"><div class="markdown"><p>Decodes text key to bytes.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/utils/tree/1.2.39/src/io/randomseed/utils/crypto.clj#L40">view source</a></div></div><div class="public anchor" id="var-pwd-.3Ebin"><h3>pwd-&gt;bin</h3><div class="usage"><code>(pwd-&gt;bin pwd)</code></div><div class="doc"><div class="markdown"><p>Hashes password with SHA-256 (bytes). Returns nil on nil/empty input.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/utils/tree/1.2.39/src/io/randomseed/utils/crypto.clj#L45">view source</a></div></div><div class="public anchor" id="var-read-key"><h3>read-key</h3><div class="usage"><code>(read-key)</code><code>(read-key prompt)</code></div><div class="doc"><div class="markdown"><p>Reads a key from a console with an optional prompt. Returns a string or nil. The default prompt is: "Enter key: ").</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/utils/tree/1.2.39/src/io/randomseed/utils/crypto.clj#L109">view source</a></div></div><div class="public anchor" id="var-read-pwd"><h3>read-pwd</h3><div class="usage"><code>(read-pwd)</code><code>(read-pwd prompt)</code></div><div class="doc"><div class="markdown"><p>Reads password from a console with an optional prompt. Returns a string or nil. The default prompt is: "Enter password: ").</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/utils/tree/1.2.39/src/io/randomseed/utils/crypto.clj#L100">view source</a></div></div><div class="public anchor" id="var-salt-b64-.3Ebin"><h3>salt-b64-&gt;bin</h3><div class="usage"><code>(salt-b64-&gt;bin v)</code></div><div class="doc"><div class="markdown"><p>Decodes Base64-encoded, url-safe salt string to bytes. Returns nil on nil input.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/utils/tree/1.2.39/src/io/randomseed/utils/crypto.clj#L19">view source</a></div></div><div class="public anchor" id="var-salt-bin-.3Eb64"><h3>salt-bin-&gt;b64</h3><div class="usage"><code>(salt-bin-&gt;b64 v)</code></div><div class="doc"><div class="markdown"><p>Encodes binary salt data to a Base64-encoded, url-safe string.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/utils/tree/1.2.39/src/io/randomseed/utils/crypto.clj#L24">view source</a></div></div></div></body></html>